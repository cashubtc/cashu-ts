<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>CONTRIBUTING | Cashu-TS - v3.3.0</title><meta name="description" content="Documentation for Cashu-TS"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">Cashu-TS - v3.3.0</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="" aria-current="page">CONTRIBUTING</a></li></ul></div><div class="tsd-panel tsd-typography"><p><a href="../index.html">Documents</a> › <strong>Contribution Guide</strong></p>
<h1 id="contribution-guide" class="tsd-anchor-link">Contribution Guide<a href="#contribution-guide" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This file is contributor-facing: quick setup, how to opt in to local hooks, and a short PR checklist. For detailed developer instructions (environment, hooks internals, release process, CI parity, and troubleshooting) see <a href="DEVELOPER.html">the developer guide</a>.</p>
<h2 id="quickstart" class="tsd-anchor-link">Quickstart<a href="#quickstart" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">clone</span><span class="hl-1"> </span><span class="hl-2">https://github.com/cashubtc/cashu-ts.git</span><br/><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">cashu-ts</span><br/><span class="hl-5"># install exact deps used by CI</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">ci</span><br/><br/><span class="hl-5"># optional: prepare Playwright browsers for integration tests</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test:prepare</span><br/><br/><span class="hl-5"># optional: opt in to local git hooks</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">setup-hooks</span>
</code><button type="button">Copy</button></pre>

<h2 id="pr-checklist-author" class="tsd-anchor-link">PR checklist (author)<a href="#pr-checklist-author" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Code compiles / build passes: <code>npm run compile</code></li>
<li>Lint: <code>npm run lint</code></li>
<li>Format: <code>npm run format</code></li>
<li>Tests: <code>npm test</code></li>
<li>If public API changed: run <code>npm run api:update</code> and commit <code>/etc/cashu-ts.api.md</code></li>
</ul>
<h2 id="local-hooks-short" class="tsd-anchor-link">Local hooks (short)<a href="#local-hooks-short" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>We provide an optional hook installer. Run <code>npm run setup-hooks</code> to copy tracked hook sources from <code>scripts/hooks/</code> into an ignored <code>.githooks/</code> folder and activate them locally. Hooks are opt-in; CI still runs the full checks.</p>
<p>If you want the installer behavior or hook internals, see the <code>Hooks</code> section in <code>DEVELOPER.md</code>.</p>
<h2 id="full-pr-checks" class="tsd-anchor-link">Full PR checks<a href="#full-pr-checks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>There is a convenience script <code>npm run prtasks</code> that runs the full PR/CI suite (lint, format, api:update, tests). The installed <code>pre-push</code> hook runs <code>npm run prtasks</code> to ensure the full checks before pushing. You may run it manually before opening a PR.</p>
<p>If you need the pre-commit hook to run the full suite for one commit, set <code>FULL_PRECOMMIT=1</code> when committing:</p>
<pre><code class="bash"><span class="hl-4">FULL_PRECOMMIT</span><span class="hl-1">=</span><span class="hl-2">1</span><span class="hl-1"> </span><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">commit</span><span class="hl-1"> </span><span class="hl-6">-m</span><span class="hl-1"> </span><span class="hl-2">&quot;...&quot;</span>
</code><button type="button">Copy</button></pre>

<p>Tip: a common local workflow before pushing is to run <code>npm run prtasks</code> and, for integration tests, start a local mint using the example <code>docker-compose</code> (see <code>examples/auth_mint/docker-compose.yml</code>) and then run <code>npm run test-integration</code>. This reproduces CI conditions locally and reduces surprises.</p>
<h2 id="api-extractor" class="tsd-anchor-link">API Extractor<a href="#api-extractor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This project uses API-Extractor in CI. For details on <code>npm run api:check</code> and <code>npm run api:update</code> and the correct workflow for updating API reports, see <code>DEVELOPER.md</code>.</p>
<h2 id="code-documentation-conventions" class="tsd-anchor-link">Code documentation conventions<a href="#code-documentation-conventions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="tsdoc-release-tags" class="tsd-anchor-link">TSDoc release tags<a href="#tsdoc-release-tags" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When adding new features that are subject to change, use the <code>@experimental</code> tag in TSDoc comments:</p>
<pre><code class="typescript"><span class="hl-5">/**</span><br/><span class="hl-5"> * This function does something new and exciting.</span><br/><span class="hl-5"> *</span><br/><span class="hl-5"> * </span><span class="hl-6">@experimental</span><span class="hl-5"> This API is subject to change.</span><br/><span class="hl-5"> */</span><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">myNewFeature</span><span class="hl-1">(): </span><span class="hl-9">void</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-5">// ...</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Why <code>@experimental</code> instead of <code>@alpha</code> or <code>@beta</code>?</strong></p>
<p>Our vite build process excludes <code>@alpha</code> and <code>@beta</code> tagged items from the public API. Using <code>@experimental</code> allows us to surface new features while clearly flagging them as subject to change.</p>
<h3 id="todo-comments" class="tsd-anchor-link">TODO comments<a href="#todo-comments" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <code>// TODO:</code> comments to mark areas needing future attention, such as deprecated code blocks or planned improvements:</p>
<pre><code class="typescript"><span class="hl-5">// TODO: Remove this deprecated method in v4.0</span><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">oldMethod</span><span class="hl-1">(): </span><span class="hl-9">void</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-5">// ...</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>This convention allows common editor plugins like <a href="https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments">Better Comments</a> to highlight these areas for easy identification.</p>
<h2 id="integration-tests" class="tsd-anchor-link">Integration tests<a href="#integration-tests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>These tests expect a local mint at <code>http://localhost:3338</code>. Use the Make targets below to start one, you will need Docker installed locally, for example via Homebrew or Docker Desktop.</p>
<pre><code class="bash"><span class="hl-5"># CDK Mint</span><br/><span class="hl-4">DEV</span><span class="hl-1">=</span><span class="hl-2">1</span><span class="hl-1"> </span><span class="hl-0">make</span><span class="hl-1"> </span><span class="hl-2">cdk-up</span><br/><span class="hl-5"># tear down</span><br/><span class="hl-4">DEV</span><span class="hl-1">=</span><span class="hl-2">1</span><span class="hl-1"> </span><span class="hl-0">make</span><span class="hl-1"> </span><span class="hl-2">cdk-down</span><br/><br/><span class="hl-5"># Nutshell</span><br/><span class="hl-4">DEV</span><span class="hl-1">=</span><span class="hl-2">1</span><span class="hl-1"> </span><span class="hl-0">make</span><span class="hl-1"> </span><span class="hl-2">nutshell-up</span><br/><span class="hl-5"># tear down</span><br/><span class="hl-4">DEV</span><span class="hl-1">=</span><span class="hl-2">1</span><span class="hl-1"> </span><span class="hl-0">make</span><span class="hl-1"> </span><span class="hl-2">nutshell-down</span>
</code><button type="button">Copy</button></pre>

<p>To prevent accidental use, these targets require <code>DEV=1</code> to be set, either by prefixing the command as shown above, or by exporting it in your shell:</p>
<pre><code class="bash"><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">DEV</span><span class="hl-1">=</span><span class="hl-8">1</span><br/><span class="hl-0">make</span><span class="hl-1"> </span><span class="hl-2">cdk-up</span><br/><span class="hl-0">make</span><span class="hl-1"> </span><span class="hl-2">nutshell-up</span>
</code><button type="button">Copy</button></pre>

<p>On Apple Silicon the Makefile detects arm64 and runs the container with an amd64 image automatically, if you need to override, pass <code>PLATFORM=linux/amd64</code> or <code>PLATFORM=linux/arm64</code>.</p>
<p>For a faster developer experience, these developer presets enable friendly defaults such as a permissive transaction rate limit and short fake wallet delays.</p>
<p>Then run the tests:</p>
<pre><code class="bash"><span class="hl-5"># full test suite</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">test</span><br/><span class="hl-5"># integration only</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test-integration</span>
</code><button type="button">Copy</button></pre>

<h3 id="notes-that-save-time" class="tsd-anchor-link">Notes that save time<a href="#notes-that-save-time" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Both CDK Mint and Nutshell remember Lightning invoices, so for a fresh run, tear down the container with volumes. The <code>*-down</code> targets already do this for you.</li>
<li>If websocket tests time out or you see rate limit warnings, bump the Nutshell rate limit, for example <code>MINT_TRANSACTION_RATE_LIMIT_PER_MINUTE=100</code>. The developer preset sets a higher limit by default.</li>
<li>The integration project uses websockets, ensure nothing else is bound to port <code>3338</code>.</li>
</ul>
<h2 id="build-output-contracts" class="tsd-anchor-link">Build output contracts<a href="#build-output-contracts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><strong>TS sources</strong> use extensionless imports.</li>
<li><strong>Runtime ESM</strong> (<code>lib/**/*.js</code>) must have <code>.js</code> on relative imports.</li>
<li><strong>Runtime CJS</strong> (<code>lib/**/*.cjs</code>) may omit extensions, Node does not require them.</li>
<li><strong>Type declarations</strong> (<code>lib/types/**/*.d.ts</code>) are a rolled up file (no relative imports/re-exports).</li>
</ul>
<hr>
<p>Thanks for contributing — please open <a href="https://github.com/cashubtc/cashu-ts/issues">Issues</a> or <a href="https://github.com/cashubtc/cashu-ts/pulls">Pull Requests</a> if anything is unclear.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#contribution-guide"><span>Contribution <wbr/>Guide</span></a><ul><li><a href="#quickstart"><span>Quickstart</span></a></li><li><a href="#pr-checklist-author"><span>PR checklist (author)</span></a></li><li><a href="#local-hooks-short"><span>Local hooks (short)</span></a></li><li><a href="#full-pr-checks"><span>Full <wbr/>PR checks</span></a></li><li><a href="#api-extractor"><span>API <wbr/>Extractor</span></a></li><li><a href="#code-documentation-conventions"><span>Code documentation conventions</span></a></li><li><ul><li><a href="#tsdoc-release-tags"><span>TS<wbr/>Doc release tags</span></a></li><li><a href="#todo-comments"><span>TODO comments</span></a></li></ul></li><li><a href="#integration-tests"><span>Integration tests</span></a></li><li><ul><li><a href="#notes-that-save-time"><span>Notes that save time</span></a></li></ul></li><li><a href="#build-output-contracts"><span>Build output contracts</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">Cashu-TS - v3.3.0</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer></footer><div class="overlay"></div></body></html>
