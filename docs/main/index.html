<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@cashu/cashu-ts</title><meta name="description" content="Documentation for @cashu/cashu-ts"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">@cashu/cashu-ts</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@cashu/cashu-ts</h1></div><div class="tsd-panel tsd-typography"><h1 id="cashu-ts" class="tsd-anchor-link">Cashu TS<a href="#cashu-ts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><img src="https://img.shields.io/github/actions/workflow/status/cashubtc/cashu-ts/node.js.yml" alt="GitHub Workflow Status">
<img src="https://img.shields.io/github/issues/cashubtc/cashu-ts" alt="GitHub issues">
<img src="https://img.shields.io/github/package-json/v/cashubtc/cashu-ts" alt="GitHub package.json version">
<img src="https://img.shields.io/npm/v/@cashu/cashu-ts" alt="npm">
<img src="https://img.shields.io/npm/types/@cashu/cashu-ts" alt="npm type definitions">
<img src="https://img.shields.io/bundlephobia/min/@cashu/cashu-ts" alt="npm bundle size">
<a href="https://cashubtc.github.io/cashu-ts/coverage">code coverage</a></p>
<p>⚠️ <strong>Don't be reckless:</strong> This project is in early development, it does however work with real sats! Always use amounts you don't mind losing.</p>
<p>Cashu TS is a JavaScript library for <a href="https://github.com/cashubtc">Cashu</a> wallets written in Typescript.</p>
<p>Wallet Features:</p>
<ul>
<li>[x] connect to mint (load keys)</li>
<li>[x] request minting tokens</li>
<li>[x] minting tokens</li>
<li>[x] sending tokens (get encoded token for chosen value)</li>
<li>[x] receiving tokens</li>
<li>[x] melting tokens</li>
<li>[x] check if tokens are spent</li>
<li>[x] payment methods: bolt11, bolt12</li>
<li>[ ] ...</li>
</ul>
<p>Implemented <a href="https://github.com/cashubtc/nuts/">NUTs</a>:</p>
<ul>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/00.md">NUT-00</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/01.md">NUT-01</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/02.md">NUT-02</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/03.md">NUT-03</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/04.md">NUT-04</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/05.md">NUT-05</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/06.md">NUT-06</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/07.md">NUT-07</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/08.md">NUT-08</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/09.md">NUT-09</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/11.md">NUT-11</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/18.md">NUT-18</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/23.md">NUT-23</a></li>
<li>[x] <a href="https://github.com/cashubtc/nuts/blob/main/25.md">NUT-25</a></li>
</ul>
<p>Supported token formats:</p>
<ul>
<li>[x] v1 read</li>
<li>[x] v2 read (deprecated)</li>
<li>[x] v3 read/write</li>
<li>[x] v4 read/write</li>
</ul>
<h2 id="usage" class="tsd-anchor-link">Usage<a href="#usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Go to the <a href="https://cashubtc.github.io/cashu-ts/docs/main">docs</a> for detailed usage, or have a look at the <a href="media/integration.test.ts">integration tests</a> for examples on how to implement a wallet.</p>
<h3 id="install" class="tsd-anchor-link">Install<a href="#install" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="shell"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-2">@cashu/cashu-ts</span>
</code><button type="button">Copy</button></pre>

<h3 id="logging" class="tsd-anchor-link">Logging<a href="#logging" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>By default, cashu-ts does not log to the console. If you want to enable logging for debugging purposes, you can set the <code>logger</code> option when creating a wallet or mint. A <code>ConsoleLogger</code> is provided, or you can wrap your existing logger to conform to the <code>Logger</code> interface:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">CashuMint</span><span class="hl-1">, </span><span class="hl-4">CashuWallet</span><span class="hl-1">, </span><span class="hl-4">ConsoleLogger</span><span class="hl-1">, </span><span class="hl-4">LogLevel</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@cashu/cashu-ts&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">mintUrl</span><span class="hl-1"> = </span><span class="hl-2">&#39;http://localhost:3338&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">mintLogger</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ConsoleLogger</span><span class="hl-1">(</span><span class="hl-4">LogLevel</span><span class="hl-1">.</span><span class="hl-6">ERROR</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">mint</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">CashuMint</span><span class="hl-1">(</span><span class="hl-4">mintUrl</span><span class="hl-1">, </span><span class="hl-5">undefined</span><span class="hl-1">, { </span><span class="hl-4">logger:</span><span class="hl-1"> </span><span class="hl-4">mintLogger</span><span class="hl-1"> }); </span><span class="hl-7">// Enable logging for the mint</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">walletLogger</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">ConsoleLogger</span><span class="hl-1">(</span><span class="hl-4">LogLevel</span><span class="hl-1">.</span><span class="hl-6">DEBUG</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">wallet</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">CashuWallet</span><span class="hl-1">(</span><span class="hl-4">mint</span><span class="hl-1">, { </span><span class="hl-4">logger:</span><span class="hl-1"> </span><span class="hl-4">walletLogger</span><span class="hl-1"> }); </span><span class="hl-7">// Enable logging for the wallet</span>
</code><button type="button">Copy</button></pre>

<h3 id="examples" class="tsd-anchor-link">Examples<a href="#examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="mint-tokens" class="tsd-anchor-link">Mint tokens<a href="#mint-tokens" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">CashuMint</span><span class="hl-1">, </span><span class="hl-4">CashuWallet</span><span class="hl-1">, </span><span class="hl-4">MintQuoteState</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@cashu/cashu-ts&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">mintUrl</span><span class="hl-1"> = </span><span class="hl-2">&#39;http://localhost:3338&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">mint</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">CashuMint</span><span class="hl-1">(</span><span class="hl-4">mintUrl</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">wallet</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">CashuWallet</span><span class="hl-1">(</span><span class="hl-4">mint</span><span class="hl-1">);</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">loadMint</span><span class="hl-1">(); </span><span class="hl-7">// persist wallet.keys and wallet.keysets to avoid calling loadMint() in the future</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">mintQuote</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">createMintQuote</span><span class="hl-1">(</span><span class="hl-8">64</span><span class="hl-1">);</span><br/><span class="hl-7">// pay the invoice here before you continue...</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">mintQuoteChecked</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">checkMintQuote</span><span class="hl-1">(</span><span class="hl-4">mintQuote</span><span class="hl-1">.</span><span class="hl-4">quote</span><span class="hl-1">);</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">mintQuoteChecked</span><span class="hl-1">.</span><span class="hl-4">state</span><span class="hl-1"> == </span><span class="hl-4">MintQuoteState</span><span class="hl-1">.</span><span class="hl-6">PAID</span><span class="hl-1">) {</span><br/><span class="hl-1">	</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">proofs</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">mintProofs</span><span class="hl-1">(</span><span class="hl-8">64</span><span class="hl-1">, </span><span class="hl-4">mintQuote</span><span class="hl-1">.</span><span class="hl-4">quote</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h4 id="melt-tokens" class="tsd-anchor-link">Melt tokens<a href="#melt-tokens" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">CashuMint</span><span class="hl-1">, </span><span class="hl-4">CashuWallet</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@cashu/cashu-ts&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">mintUrl</span><span class="hl-1"> = </span><span class="hl-2">&#39;http://localhost:3338&#39;</span><span class="hl-1">; </span><span class="hl-7">// the mint URL</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">mint</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">CashuMint</span><span class="hl-1">(</span><span class="hl-4">mintUrl</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">wallet</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">CashuWallet</span><span class="hl-1">(</span><span class="hl-4">mint</span><span class="hl-1">); </span><span class="hl-7">// load the keysets of the mint</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">invoice</span><span class="hl-1"> = </span><span class="hl-2">&#39;lnbc......&#39;</span><span class="hl-1">; </span><span class="hl-7">// Lightning invoice to pay</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">meltQuote</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">createMeltQuote</span><span class="hl-1">(</span><span class="hl-4">invoice</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">amountToSend</span><span class="hl-1"> = </span><span class="hl-4">meltQuote</span><span class="hl-1">.</span><span class="hl-4">amount</span><span class="hl-1"> + </span><span class="hl-4">meltQuote</span><span class="hl-1">.</span><span class="hl-4">fee_reserve</span><span class="hl-1">;</span><br/><br/><span class="hl-7">// CashuWallet.send performs coin selection and swaps the proofs with the mint</span><br/><span class="hl-7">// if no appropriate amount can be selected offline. We must include potential</span><br/><span class="hl-7">// ecash fees that the mint might require to melt the resulting proofsToSend later.</span><br/><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-4">keep</span><span class="hl-1">: </span><span class="hl-6">proofsToKeep</span><span class="hl-1">, </span><span class="hl-4">send</span><span class="hl-1">: </span><span class="hl-6">proofsToSend</span><span class="hl-1"> } = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">send</span><span class="hl-1">(</span><span class="hl-4">amountToSend</span><span class="hl-1">, </span><span class="hl-4">proofs</span><span class="hl-1">, {</span><br/><span class="hl-1">	</span><span class="hl-4">includeFees:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-7">// store proofsToKeep in wallet ..</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">meltResponse</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">meltProofs</span><span class="hl-1">(</span><span class="hl-4">meltQuote</span><span class="hl-1">, </span><span class="hl-4">proofsToSend</span><span class="hl-1">);</span><br/><span class="hl-7">// store meltResponse.change in wallet ..</span>
</code><button type="button">Copy</button></pre>

<h4 id="create-a-token-and-receive-it" class="tsd-anchor-link">Create a token and receive it<a href="#create-a-token-and-receive-it" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-7">// we assume that `wallet` already minted `proofs`, as above</span><br/><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">keep</span><span class="hl-1">, </span><span class="hl-6">send</span><span class="hl-1"> } = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">send</span><span class="hl-1">(</span><span class="hl-8">32</span><span class="hl-1">, </span><span class="hl-4">proofs</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">token</span><span class="hl-1"> = </span><span class="hl-0">getEncodedTokenV4</span><span class="hl-1">({ </span><span class="hl-4">mint:</span><span class="hl-1"> </span><span class="hl-4">mintUrl</span><span class="hl-1">, </span><span class="hl-4">proofs:</span><span class="hl-1"> </span><span class="hl-4">send</span><span class="hl-1"> });</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">token</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">wallet2</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">CashuWallet</span><span class="hl-1">(</span><span class="hl-4">mint</span><span class="hl-1">); </span><span class="hl-7">// receiving wallet</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">receiveProofs</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet2</span><span class="hl-1">.</span><span class="hl-0">receive</span><span class="hl-1">(</span><span class="hl-4">token</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h4 id="get-token-data" class="tsd-anchor-link">Get token data<a href="#get-token-data" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">decodedToken</span><span class="hl-1"> = </span><span class="hl-0">getDecodedToken</span><span class="hl-1">(</span><span class="hl-4">token</span><span class="hl-1">);</span><br/><span class="hl-1">	</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">decodedToken</span><span class="hl-1">); </span><span class="hl-7">// { mint: &quot;https://mint.0xchat.com&quot;, unit: &quot;sat&quot;, proofs: [...] }</span><br/><span class="hl-1">} </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">_</span><span class="hl-1">) {</span><br/><span class="hl-1">	</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Invalid token&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h4 id="bolt12-reusable-offers" class="tsd-anchor-link">BOLT12 (Reusable Offers)<a href="#bolt12-reusable-offers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>BOLT12 enables reusable Lightning offers that can be paid multiple times, unlike BOLT11 invoices which are single-use. Key differences:</p>
<ul>
<li><strong>Reusable</strong>: Same offer can receive multiple payments</li>
<li><strong>Amount flexibility</strong>: Offers can be amountless (payer chooses amount)</li>
</ul>
<pre><code class="typescript"><span class="hl-7">// Create reusable BOLT12 offer</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">bolt12Quote</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">createMintQuoteBolt12</span><span class="hl-1">(</span><span class="hl-0">bytesToHex</span><span class="hl-1">(</span><span class="hl-4">pubkey</span><span class="hl-1">), {</span><br/><span class="hl-1">	</span><span class="hl-4">amount:</span><span class="hl-1"> </span><span class="hl-8">1000</span><span class="hl-1">, </span><span class="hl-7">// Optional: omit to create an amountless offer</span><br/><span class="hl-1">	</span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;My reusable offer&#39;</span><span class="hl-1">, </span><span class="hl-7">// The mint must signal in their settings that offers with a description are supported</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-7">// Pay a BOLT12 offer</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">meltQuote</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">createMeltQuoteBolt12</span><span class="hl-1">(</span><span class="hl-4">offer</span><span class="hl-1">, </span><span class="hl-8">1000000</span><span class="hl-1">); </span><span class="hl-7">// amount in msat</span><br/><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">keep</span><span class="hl-1">, </span><span class="hl-6">send</span><span class="hl-1"> } = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">send</span><span class="hl-1">(</span><span class="hl-4">meltQuote</span><span class="hl-1">.</span><span class="hl-4">amount</span><span class="hl-1"> + </span><span class="hl-4">meltQuote</span><span class="hl-1">.</span><span class="hl-4">fee_reserve</span><span class="hl-1">, </span><span class="hl-4">proofs</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">change</span><span class="hl-1"> } = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">meltProofsBolt12</span><span class="hl-1">(</span><span class="hl-4">meltQuote</span><span class="hl-1">, </span><span class="hl-4">send</span><span class="hl-1">);</span><br/><br/><span class="hl-7">// Mint from accumulated BOLT12 payments</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">updatedQuote</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">checkMintQuoteBolt12</span><span class="hl-1">(</span><span class="hl-4">bolt12Quote</span><span class="hl-1">.</span><span class="hl-4">quote</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">availableAmount</span><span class="hl-1"> = </span><span class="hl-4">updatedQuote</span><span class="hl-1">.</span><span class="hl-4">amount_paid</span><span class="hl-1"> - </span><span class="hl-4">updatedQuote</span><span class="hl-1">.</span><span class="hl-4">amount_issued</span><span class="hl-1">;</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">availableAmount</span><span class="hl-1"> &gt; </span><span class="hl-8">0</span><span class="hl-1">) {</span><br/><span class="hl-1">	</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">newProofs</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">wallet</span><span class="hl-1">.</span><span class="hl-0">mintProofsBolt12</span><span class="hl-1">(</span><br/><span class="hl-1">		</span><span class="hl-4">availableAmount</span><span class="hl-1">,</span><br/><span class="hl-1">		</span><span class="hl-4">updatedQuote</span><span class="hl-1">,</span><br/><span class="hl-1">		</span><span class="hl-0">bytesToHex</span><span class="hl-1">(</span><span class="hl-4">privateKey</span><span class="hl-1">),</span><br/><span class="hl-1">	);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="contribute" class="tsd-anchor-link">Contribute<a href="#contribute" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Contributions are very welcome.</p>
<p>If you want to contribute, please open an Issue or a PR.
If you open a PR, please do so from the <code>development</code> branch as the base branch.</p>
<h2 id="release-strategy" class="tsd-anchor-link">Release strategy<a href="#release-strategy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Features and fixes should be implemented by branching off <code>development</code>. Hotfixes can be implemented by branching off a given <code>tag</code>. A new release can be created if at least one new feature or fix has been added to the <code>development</code> branch. If the release has breaking API changes, the major version must be incremented (X.0.0). If not, the release can increment the minor version (0.X.0). Patches and hotfixes increment the patch version (0.0.X). To create a new release, the following steps must be taken:</p>
<ol>
<li><code>git checkout development &amp;&amp; git pull</code> Checkout and pull latest changes from <code>development</code></li>
<li><code>npm version &lt;major | minor | patch&gt;</code> create new release commit &amp; tag</li>
<li><code>git push &amp;&amp; git push --tags</code> push commit and tag</li>
<li>Create a new release on github, targeting the newly created tag</li>
<li>The CI will build and deploy to npm, with provenance</li>
<li><code>git checkout main &amp;&amp; git pull &amp;&amp; git merge &lt;tag&gt;</code> After creating a new version, merge the tag into <code>main</code></li>
</ol>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#cashu-ts"><span>Cashu <wbr/>TS</span></a><ul><li><a href="#usage"><span>Usage</span></a></li><li><ul><li><a href="#install"><span>Install</span></a></li><li><a href="#logging"><span>Logging</span></a></li><li><a href="#examples"><span>Examples</span></a></li><li><ul><li><a href="#mint-tokens"><span>Mint tokens</span></a></li><li><a href="#melt-tokens"><span>Melt tokens</span></a></li><li><a href="#create-a-token-and-receive-it"><span>Create a token and receive it</span></a></li><li><a href="#get-token-data"><span>Get token data</span></a></li><li><a href="#bolt12-reusable-offers"><span>BOLT12 (<wbr/>Reusable <wbr/>Offers)</span></a></li></ul></li></ul></li><li><a href="#contribute"><span>Contribute</span></a></li><li><a href="#release-strategy"><span>Release strategy</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">@cashu/cashu-ts</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
