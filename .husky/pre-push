#!/usr/bin/env sh
echo "Running pre-push: full PR tasks (lint, format, api:update, tests)"

if ! command -v npm >/dev/null 2>&1; then
	echo "npm not found in PATH. Install Node.js/npm before pushing." >&2
	exit 1
fi

echo "-> npm run prtasks"
npm run prtasks || {
	echo "pre-push checks failed. Push aborted." >&2
	exit 1
}

echo "Pre-push checks passed."
